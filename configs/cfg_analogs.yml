project:
  title: CASCADES
  description: Production de trames narratives pour le projet CASCADES

tasks:
  compute: False
  hydro_stats: False
  figure_spei: True
  figure_hydro: False

storylines:
  ref_period: ['1992', '2021']
  # https://www.eea.europa.eu/data-and-maps/daviz/global-average-air-temperature-anomalies-6#tab-dashboard-01
  # Real 1991-2020 = +0.80°C  (mix NOAA, NASA, HadCRUT4)
  # https://www.metoffice.gov.uk/hadobs/hadcrut5/data/current/download.html
  # https://www.carbonbrief.org/analysis-why-the-new-met-office-temperature-record-shows-faster-warming-since-1970s/
  # Real 1992-2021 = +0.91°C  (HadCRUT5)
#  warming_levels: [0.91]
  warming_levels: [0.91, 1.5, 2, 3, 4]

extract:
  subset_warming_level:
    window: 30

analogs:
  targets:
    2021:
      region: ['OBVBM', 'OBVZB', 'GROBEC', 'SCABRIC', 'COBARIC', 'OBV du ChÃªne', 'OBVRLY',
               'CBE', 'CBJC', 'CARA', 'AGIR MaskinongÃ©', 'COBAMIL', 'COPERNIC', 'COVABAR',
               'OBV-Capitale', 'COGESAF', 'OBV CAPSA', 'COBAVER-VS', 'OBV Yamaska', 'SAMBBA']
    2018:
      region: ['OBV CÃ´te-du-Sud', 'CENG', 'CEGS', 'OBAKIR', 'OBVMR', 'OBVNEBSL', 'OBVFSJ']
    2012:
      region: ['OBVBM', 'OBVZB', 'GROBEC', 'SCABRIC', 'COBARIC', 'OBV du ChÃªne', 'OBVRLY',
               'CBE', 'CBJC', 'CARA', 'AGIR MaskinongÃ©', 'COBAMIL', 'COPERNIC', 'COVABAR',
               'OBV-Capitale', 'COGESAF', 'OBV CAPSA', 'COBAVER-VS', 'OBV Yamaska', 'SAMBBA',
               'OBVAJ', 'COBALI', 'ABRINORD', 'ABV des 7', 'OBVRPNS', 'BVSM', 'OBVT']
    2010:
      region: ['OBVZB', 'OBVRLY', 'CBJC', 'CARA', 'AGIR MaskinongÃ©', 'COBAMIL', 'OBV-Capitale',
               'OBV CAPSA', 'COBAVER-VS', 'SAMBBA', 'OBVAJ', 'COBALI', 'ABRINORD', 'ABV des 7',
               'OBVRPNS',  'OBVT', 'OBVHCN', 'OBVLSJ', 'OBV-CM', 'OBVS', 'BVSM']
    1995:
      region: ['OBVZB', 'OBVRLY', 'CBJC', 'CARA', 'AGIR MaskinongÃ©', 'COBAMIL', 'OBV-Capitale',
               'OBV CAPSA', 'COBAVER-VS', 'SAMBBA', 'OBVAJ', 'COBALI', 'ABRINORD', 'ABV des 7',
               'OBVRPNS',  'OBVT', 'OBVHCN', 'OBVLSJ', 'OBV-CM', 'OBVS', 'BVSM', 'OBVM', 'OBVD']

  compute_criteria:
    v1:
      criteria: [["spei6", 5], ["spei3", 5], ["spei3", 6], ["spei3", 7], ["spei3", 8], ["spei3", 9], ["spei3", 10], ["spei3", 11], ["spei6", 10]]
      weights_close_far: [1, 0.33, 0]
      weights_2_1: [1, 0.5, 0.33]
      normalise: False
    v1n:
      criteria: [["spei6", 5], ["spei3", 5], ["spei3", 6], ["spei3", 7], ["spei3", 8], ["spei3", 9], ["spei3", 10], ["spei3", 11], ["spei6", 10]]
      weights_close_far: [1, 0.33, 0]
      weights_2_1: [1, 0.5, 0.33]
      normalise: True
    v2:
      criteria: [["spei6", 5], ["spei3", 5], ["spei3", 6], ["spei3", 7], ["spei3", 8], ["spei3", 9], ["spei3", 10], ["spei3", 11], ["spei6", 10]]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 0.33, 0.1 ]
      normalise: False
    v2n:
      criteria: [["spei6", 5], ["spei3", 5], ["spei3", 6], ["spei3", 7], ["spei3", 8], ["spei3", 9], ["spei3", 10], ["spei3", 11], ["spei6", 10]]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 0.33, 0.1 ]
      normalise: True
    v3:
      criteria: [["spei6", 5], ["spei3", 5], ["spei3", 6], ["spei3", 7], ["spei3", 8], ["spei3", 9], ["spei3", 10], ["spei3", 11], ["spei6", 10]]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 1, 1 ]
      normalise: False
    v3n:
      criteria: [["spei6", 5], ["spei3", 5], ["spei3", 6], ["spei3", 7], ["spei3", 8], ["spei3", 9], ["spei3", 10], ["spei3", 11], ["spei6", 10]]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 1, 1 ]
      normalise: True
    v4:
      criteria: [ [ "spei6", 5 ], [ "spei3", 9 ], [ "spei6", 10 ], [ "spei9", 10 ] ]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 0.5, 0.33 ]
      normalise: False
    v4n:
      criteria: [ [ "spei6", 5 ], [ "spei3", 9 ], [ "spei6", 10 ], [ "spei9", 10 ] ]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 0.5, 0.33 ]
      normalise: True
    v5:
      criteria: [ [ "spei6", 5 ], [ "spei3", 9 ], [ "spei6", 10 ], [ "spei9", 10 ] ]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 0.33, 0.1 ]
      normalise: False
    v5n:
      criteria: [ [ "spei6", 5 ], [ "spei3", 9 ], [ "spei6", 10 ], [ "spei9", 10 ] ]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 0.33, 0.1 ]
      normalise: True
    v6:
      criteria: [ [ "spei6", 5 ], [ "spei3", 9 ], [ "spei6", 10 ], [ "spei9", 10 ] ]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 1, 1 ]
      normalise: False
    v6n:
      criteria: [ [ "spei6", 5 ], [ "spei3", 9 ], [ "spei6", 10 ], [ "spei9", 10 ] ]
      weights_close_far: [ 1, 0.33, 0 ]
      weights_2_1: [ 1, 1, 1 ]
      normalise: True
    v7:
      criteria: [["spei6", 5], ["spei3", 5], ["spei3", 6], ["spei3", 7], ["spei3", 8], ["spei3", 9], ["spei3", 10], ["spei3", 11], ["spei6", 10]]
      weights_close_far: [ 1, 1, 1 ]
      weights_2_1: [ 1, 0.33, 0.1 ]
      normalise: False
    vspecial:
      criteria: ["spei3", "spei6", "spei9"]
      weights_close_far: [ 1, 1, 1 ]
      weights_2_1: [ 1, 0.33, 0.1 ]
      normalise: True

figures:
  doy_14qmax:
    bnds:
      start: -60
      stop: 60
      num: 9
    cmap: RdBu
  14qmax:
    bnds:
      start: -100
      stop: 100
      num: 9
    cmap: RdBu
  7qmin:
    bnds:
      start: -100
      stop: 100
      num: 9
    cmap: RdBu
  days_under_7q2:
    bnds:
      start: 0
      stop: 100
      num: 9
    cmap: hot_r
  max_consecutive_days_under_7q2:
    bnds:
      start: 0
      stop: 100
      num: 9
    cmap: hot_r
  season_start:
    bnds:
      start: -60
      stop: 60
      num: 9
    cmap: RdBu
  season_end:
    bnds:
      start: -60
      stop: 60
      num: 9
    cmap: RdBu_r

dask:
  n_workers: 5
  threads_per_worker: 3
  memory_limit: 20GB
